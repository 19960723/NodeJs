# ğŸš€ Node.js Express + TypeScript + Prisma + MySQL é¡¹ç›®æ¨¡æ¿

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ **Express + TypeScript + Prisma + MySQL** æ­å»ºçš„åç«¯æœåŠ¡æ¨¡æ¿ï¼Œé€‚ç”¨äºå‰åç«¯åˆ†ç¦»é¡¹ç›®ã€API æœåŠ¡å¼€å‘æˆ–ä¸­å¤§å‹é¡¹ç›®çš„å¿«é€Ÿèµ·æ­¥ã€‚

---

## ğŸ“¦ æŠ€æœ¯æ ˆ

- **Express** - Node.js Web æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **Prisma** - ç°ä»£ ORMï¼Œæ“ä½œæ•°æ®åº“æ›´å®‰å…¨ä¾¿æ·
- **MySQL** - é«˜æ€§èƒ½å…³ç³»å‹æ•°æ®åº“
- **bcrypt** - å®‰å…¨åŠ å¯†ç”¨æˆ·å¯†ç 
- **jsonwebtoken** - æ”¯æŒåŸºäº JWT çš„ç”¨æˆ·è®¤è¯
- **dotenv** - ç®¡ç†å¤šç¯å¢ƒé…ç½®
- **morgan** - è®°å½• HTTP è¯·æ±‚æ—¥å¿—
- **cors** - å¤„ç†è·¨åŸŸè¯·æ±‚

---

## ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

```
.
â”œâ”€â”€ prisma/                    # Prisma æ•°æ®å»ºæ¨¡ä¸è¿ç§»ç›®å½•
â”‚   â””â”€â”€ schema.prisma          # æ•°æ®æ¨¡å‹å®šä¹‰ï¼Œæ˜ å°„æ•°æ®åº“è¡¨ç»“æ„
â”‚
â”œâ”€â”€ src/                       # æºç ä¸»ç›®å½•
â”‚   â”œâ”€â”€ config/                # é…ç½®é¡¹ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥ã€JWT å¯†é’¥ç­‰
â”‚   â”‚   â””â”€â”€ db.ts              # Prisma å®ä¾‹å’Œæ•°æ®åº“è¿æ¥å¯¼å‡º
â”‚
â”‚   â”œâ”€â”€ controllers/           # æ§åˆ¶å™¨å±‚ï¼šå¤„ç†è¯·æ±‚ï¼Œè°ƒç”¨ service è¿”å›å“åº”
â”‚   â”‚   â””â”€â”€ user.controller.ts # ç¤ºä¾‹ç”¨æˆ·æ¥å£é€»è¾‘ï¼Œå¦‚ç™»å½•æ³¨å†Œ
â”‚
â”‚   â”œâ”€â”€ services/              # æœåŠ¡å±‚ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘ã€è°ƒç”¨æ•°æ®åº“
â”‚   â”‚   â””â”€â”€ user.service.ts    # ç”¨æˆ·ä¸šåŠ¡é€»è¾‘ï¼Œå¦‚åˆ›å»ºç”¨æˆ·ã€éªŒè¯å¯†ç ç­‰
â”‚
â”‚   â”œâ”€â”€ routes/                # è·¯ç”±å±‚ï¼šå®šä¹‰å„æ¨¡å—çš„è·¯ç”±è§„åˆ™
â”‚   â”‚   â””â”€â”€ user.routes.ts     # ç”¨æˆ·æ¨¡å—çš„è·¯ç”±æ³¨å†Œ
â”‚
â”‚   â”œâ”€â”€ middlewares/           # ä¸­é—´ä»¶å±‚ï¼šç”¨äºå¤„ç†é‰´æƒã€é”™è¯¯ã€æ—¥å¿—ç­‰
â”‚   â”‚   â”œâ”€â”€ authMiddleware.ts  # é‰´æƒä¸­é—´ä»¶ï¼Œæ ¡éªŒ JWT
â”‚   â”‚   â””â”€â”€ errorHandler.ts    # é”™è¯¯å¤„ç†å™¨ï¼Œç»Ÿä¸€è¾“å‡ºé”™è¯¯ä¿¡æ¯
â”‚
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°å°è£…ç›®å½•
â”‚   â”‚   â”œâ”€â”€ hash.ts            # åŠ å¯†/æ¯”å¯¹å¯†ç ï¼ˆå°è£… bcryptï¼‰
â”‚   â”‚   â””â”€â”€ response.ts        # å°è£…ç»Ÿä¸€å“åº”æ ¼å¼
â”‚
â”‚   â”œâ”€â”€ generated/               # è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼ˆå¦‚ Prisma å®¢æˆ·ç«¯ï¼‰
â”‚ 
â”‚   â”œâ”€â”€ types/                 # ç±»å‹å®šä¹‰ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â””â”€â”€ index.d.ts         # é¡¹ç›®ä¸­ç”¨åˆ°çš„è‡ªå®šä¹‰ç±»å‹
â”‚
â”‚   â””â”€â”€ index.ts               # åº”ç”¨ä¸»å…¥å£ï¼ŒåŠ è½½ä¸­é—´ä»¶ã€æŒ‚è½½è·¯ç”±ã€å¯åŠ¨æœåŠ¡
â”‚
â”œâ”€â”€ .env                       # ç¯å¢ƒå˜é‡é…ç½®ï¼ˆæ•°æ®åº“åœ°å€ã€JWTå¯†é’¥ï¼‰
â”œâ”€â”€ package.json               # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬é…ç½®
â”œâ”€â”€ tsconfig.json              # TypeScript é…ç½®æ–‡ä»¶
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

---

## âš™ï¸ ç¯å¢ƒé…ç½®

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
DATABASE_URL="mysql://root:your_password@localhost:3306/your_db_name"
JWT_SECRET=your_jwt_secret
PORT=3000
```

---

## ğŸ›  å®‰è£…ä¸å¯åŠ¨

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆé¦–æ¬¡å»ºè¡¨ï¼‰
npx prisma migrate dev --name init

# 3. ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
npx prisma generate

# 4. å¯åŠ¨å¼€å‘ç¯å¢ƒ
npm run dev
```

---

## ğŸ§ª API ç¤ºä¾‹

### POST `/api/users/register`

æ³¨å†Œæ–°ç”¨æˆ·  
```json
{
  "username": "admin",
  "password": "123456"
}
```

### POST `/api/users/login`

ç™»å½•å¹¶è¿”å› token  
```json
{
  "username": "admin",
  "password": "123456"
}
```

---

## âœ… å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤ | æè¿° |
|------|------|
| `npm run dev` | ä½¿ç”¨ ts-node-dev å¯åŠ¨å¼€å‘æœåŠ¡å™¨ |
| `npm run build` | ç¼–è¯‘ TypeScript åˆ° `dist` |
| `npm start` | å¯åŠ¨ç¼–è¯‘åçš„ä»£ç  |
| `npx prisma studio` | æ‰“å¼€æ•°æ®åº“å¯è§†åŒ–ç®¡ç†ç•Œé¢ |
| `npx prisma migrate dev` | æ‰§è¡Œæ•°æ®åº“è¿ç§» |
| `npx prisma generate` | ç”Ÿæˆ Prisma å®¢æˆ·ç«¯ |

---

## ğŸ” JWT é‰´æƒè¯´æ˜

éƒ¨åˆ†æ¥å£å·²æ¥å…¥åŸºäº JWT çš„æƒé™è®¤è¯ï¼Œé€šè¿‡ `Authorization: Bearer <token>` æ–¹å¼è®¿é—®ã€‚

å¯åœ¨ä¸­é—´ä»¶ä¸­æ‰©å±•è§’è‰²ã€æƒé™æ ¡éªŒé€»è¾‘ã€‚

---
